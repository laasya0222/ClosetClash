extends layout

block content
  #battle-arena.container
    .row.mb-4
      .col-12.text-center
        h1.display-5= title
        if battles.length === 0
          p.lead.text-muted= message

    if battles && battles.length > 0
      each battle, index in battles
        .battle-container(id=`battle-${index}`)
          //- Outfit 1 (Left)
          .col-md-5
            .card.battle-card.text-center
              img.img-fluid.mb-3(src=battle[0].image, alt=battle[0].name, style="height: 500px; object-fit: cover; border-radius: 0.5rem;")
              .card-body
                h4= battle[0].name
                //- CORRECTED: Access owner.username directly
                p.text-muted by #{battle[0].owner.username}
                p.text-primary.fw-bold Wins: 
                  span(id=`wins-${battle[0]._id}`) #{battle[0].wins || 0}
                form.battle-form(action="/battle/vote", method="POST")
                  input(type="hidden", name="winner", value=battle[0]._id)
                  input(type="hidden", name="loser", value=battle[1]._id)
                  button.btn.btn-success.btn-lg(type="submit") Vote for this Look!

          //- Outfit 2 (Right)
          .col-md-5
            .card.battle-card.text-center
              img.img-fluid.mb-3(src=battle[1].image, alt=battle[1].name, style="height: 500px; object-fit: cover; border-radius: 0.5rem;")
              .card-body
                h4= battle[1].name
                //- CORRECTED: Access owner.username directly
                p.text-muted by #{battle[1].owner.username}
                p.text-primary.fw-bold Wins: 
                  span(id=`wins-${battle[1]._id}`) #{battle[1].wins || 0}
                form.battle-form(action="/battle/vote", method="POST")
                  input(type="hidden", name="winner", value=battle[1]._id)
                  input(type="hidden", name="loser", value=battle[0]._id)
                  button.btn.btn-success.btn-lg(type="submit") Vote for this Look!